<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <title>Convite de Casamento - Karina & Renan</title>
    <style>
        @font-face {
            font-family: 'Sage';
            src: url('fonts/Distant_Stroke_Medium.otf') format('opentype');
            font-weight: normal; font-style: normal;
        }

        body {
            min-height: 100vh; margin: 0; padding: 0; background: #feced0;
            display: flex; justify-content: center; align-items: center;
            width: 100vw; height: 100vh; overflow: hidden;
        }

        .video-window {
            width: 100vw; height: 100vh; max-width: 100vw; max-height: 100vh;
            position: relative; overflow: hidden;
            box-shadow: 0 16px 64px 0 rgba(44, 62, 80, 0.22), 0 3px 18px 0 rgba(44, 62, 80, 0.15);
            background: #feced0; margin: auto;
        }

        .video-bg {
            position: absolute; width: 100%; height: 100%;
            object-fit: cover; z-index: 1; pointer-events: none;
        }

        .video-content.scrollable {
            position: relative; z-index: 2; width: 100%; height: 100%;
            overflow-y: auto; color: #fff; font-family: 'Helvetica Neue', Arial, sans-serif;
            scrollbar-width: none;
        }
        .video-content.scrollable::-webkit-scrollbar { display: none; }

        .section {
            min-height: 100vh; width: 100%; display: flex;
            justify-content: center; align-items: center; flex-direction: column;
            padding: 0 2vw; box-sizing: border-box;
        }

        .title-names {
            font-family: 'Sage', serif; font-size: 5rem; text-align: center;
        }
        .title-names .nome { font-size: 2em; color: #fff; letter-spacing: 0.04em; }
        .title-names .e-comercial { font-size: 2em; color: #4d6737; margin: 0 0.3em; font-weight: bold; }

        .scroll-prompt {
            color: #fff; margin-top: 20px; font-size: 1.2rem;
            letter-spacing: 1px; opacity: 0.8;
        }

        .background-overlay {
            position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            background: #000; opacity: 0; z-index: 1;
            transition: opacity 0.5s ease; pointer-events: none;
        }

        /* --- ESTILOS DAS POLAROIDS (A MÁGICA ACONTECE AQUI) --- */
        .polaroid-container {
            position: absolute; width: 100%; height: 100%;
            top: 0; left: 0; z-index: 3; /* Acima do scroll para ser clicável */
            perspective: 1500px; /* Ativa a perspectiva 3D para os filhos */
            pointer-events: none; /* O container não bloqueia, mas os filhos sim */
        }

        /* Encontre e substitua a regra .is-flipped por esta */
        .polaroid.is-flipped {
            /* Apenas mantemos o z-index e a transição para garantir que a animação de retorno seja suave */
            z-index: 10;
            transition: transform 0.8s cubic-bezier(0.25, 1, 0.5, 1), z-index 0s;
        }

        /* Opcional, mas recomendado: ajuste a transição na classe .polaroid principal */
        .polaroid {
            position: absolute;
            width: 25vw; max-width: 200px;
            aspect-ratio: 3/4;
            cursor: pointer;
            transform-style: preserve-3d;
            /* Adicionamos `transform` à transição aqui */
            transition: transform 0.8s cubic-bezier(0.25, 1, 0.5, 1), opacity 0.8s ease-out;
            
            opacity: 0;
            transform: translate(-50%, -50%) scale(0.8) rotateZ(20deg);
            pointer-events: auto;
        }

        .polaroid.in-view {
            opacity: 1;
            /* A posição final é definida por ID */
            transform: translate(-50%, -50%) scale(1) rotateZ(var(--rotation, 0deg));
            transition: opacity 0.8s ease-out, transform 1s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }
        .polaroid-front, .polaroid-back {
            position: absolute;
            width: 100%; height: 100%;
            backface-visibility: hidden; /* Esconde o lado que está "atrás" */
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            background: #fff;
            padding: 12px 12px 40px 12px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
            box-sizing: border-box;
        }

        .polaroid-back {
            transform: rotateY(180deg);
            color: #333;
            font-family: 'Helvetica Neue', sans-serif;
            text-align: center;
            padding: 20px;
        }
        .polaroid-back h4 { margin: 0 0 10px; font-size: 1.1rem; color: #4d6737; }
        .polaroid-back p { margin: 0; font-size: 0.9rem; line-height: 1.5; }
        .polaroid-back p.detalhes { font-size: 0.75rem; opacity: 0.7; margin-top: 5px; }
        .polaroid-back strong { color: #000; font-weight: 600; }

        .timer-polaroid { font-size: 1.2rem; font-weight: bold; margin: 5px 0; }
        .timer-polaroid .timer-numero { color: #4d6737; }

        .polaroid-front img { display: block; width: 100%; height: 100%; object-fit: cover; }

        /* Posições Finais e Rotações das Polaroids (O "Caminho") */
        #polaroid-1 { --rotation: -8deg; top: 20%; left: 25%; transition-delay: 0s; }
        #polaroid-2 { --rotation: 5deg; top: 30%; left: 70%; transition-delay: 0.1s; }
        #polaroid-3 { --rotation: 12deg; top: 55%; left: 20%; transition-delay: 0.2s; }
        #polaroid-4 { --rotation: -10deg; top: 75%; left: 45%; transition-delay: 0.3s; }
        #polaroid-5 { --rotation: 3deg; top: 40%; left: 40%; transition-delay: 0.4s; }
        #polaroid-6 { --rotation: -5deg; top: 80%; left: 80%; transition-delay: 0.5s; }
        #polaroid-7 { --rotation: 15deg; top: 15%; left: 80%; transition-delay: 0.6s; }
        #polaroid-8 { --rotation: -3deg; top: 60%; left: 65%; transition-delay: 0.7s; }

        @media (max-width: 768px) {
            .polaroid { width: 40vw; max-width: 160px; }
            .polaroid-back h4 { font-size: 0.9rem; }
            .polaroid-back p { font-size: 0.8rem; }
            .timer-polaroid { font-size: 1rem; }
            
            #polaroid-1 { top: 18%; left: 25%; }
            #polaroid-2 { top: 25%; left: 75%; }
            #polaroid-3 { top: 45%; left: 20%; }
            #polaroid-4 { top: 60%; left: 78%; }
            #polaroid-5 { top: 78%; left: 30%; }
            #polaroid-6 { top: 85%; left: 70%; }
            #polaroid-7 { top: 35%; left: 50%; }
            #polaroid-8 { top: 5%; left: 50%; }
        }
    </style>
</head>
<body>
    <div class="video-window">
        <video autoplay loop muted playsinline class="video-bg" id="bg-video">
            <source src="video/background-video.mp4" type="video/mp4">
            Seu navegador não suporta vídeo.
        </video>

        <div class="background-overlay"></div>

        <div class="video-content scrollable">
            <!-- Seção inicial apenas com os nomes -->
            <section class="section fade-in">
                <h1 class="sage title-names">
                    <span class="nome">Karina</span>
                    <span class="e-comercial">e</span>
                    <span class="nome">Renan</span>
                </h1>
                <p class="scroll-prompt">Role para descobrir</p>
            </section>

            <!-- Uma seção vazia para criar o espaço de rolagem onde as polaroids aparecerão -->
            <section class="section" id="polaroid-path-area"></section>
        </div>

        <!-- O container das Polaroids agora fica fora do .scrollable para ser clicável -->
        <div class="polaroid-container">
            <div class="polaroid" id="polaroid-1">
                <div class="polaroid-front">
                    <img src="images/foto1.jpg" alt="Foto do casal 1">
                </div>
                <div class="polaroid-back">
                    <h4>Com alegria...</h4>
                    <p>Convidamos você para celebrar o capítulo mais feliz da nossa história: nosso casamento!</p>
                </div>
            </div>

            <div class="polaroid" id="polaroid-2">
                <div class="polaroid-front">
                    <img src="images/foto2.jpg" alt="Foto do casal 2">
                </div>
                <div class="polaroid-back">
                    <h4>A Cerimônia</h4>
                    <p>A união será celebrada no dia <strong>11 de Outubro de 2025</strong>.</p>
                </div>
            </div>
            
            <div class="polaroid" id="polaroid-3">
                <div class="polaroid-front">
                    <img src="images/foto3.jpg" alt="Foto do casal 3">
                </div>
                <div class="polaroid-back">
                    <h4>O Horário</h4>
                    <p>Marque no relógio: <strong>às 10 e 25</strong> da manhã.</p>
                </div>
            </div>

            <div class="polaroid" id="polaroid-4">
                <div class="polaroid-front">
                    <img src="images/foto4.jpg" alt="Foto do casal 4">
                </div>
                <div class="polaroid-back">
                    <h4>O Local</h4>
                    <p>Em um lugar especial de <strong>São José dos Pinhais, Paraná.</strong></p>
                    <p class="detalhes">(Endereço completo a ser confirmado)</p>
                </div>
            </div>

            <div class="polaroid" id="polaroid-5">
                <div class="polaroid-front">
                    <img src="images/foto5.jpg" alt="Foto do casal 5">
                </div>
                <div class="polaroid-back">
                    <h4>Sua Presença</h4>
                    <p>É o nosso maior presente. Mal podemos esperar para compartilhar este dia com você!</p>
                </div>
            </div>

            <div class="polaroid" id="polaroid-6">
                <div class="polaroid-front">
                    <img src="images/foto6.jpg" alt="Foto do casal 6">
                </div>
                <div class="polaroid-back">
                    <h4>Traje</h4>
                    <p>Vista-se para celebrar o amor! O traje recomendado é <strong>Esporte Fino</strong>.</p>
                </div>
            </div>

            <div class="polaroid" id="polaroid-7">
                <div class="polaroid-front">
                    <img src="images/foto7.jpg" alt="Foto do casal 7">
                </div>
                <div class="polaroid-back">
                    <h4>Confirme</h4>
                    <p>Por favor, confirme sua presença até 20/09/25 clicando aqui.</p>
                    <p class="detalhes">(Link de RSVP)</p>
                </div>
            </div>
            
            <div class="polaroid" id="polaroid-8">
                <div class="polaroid-front">
                    <img src="images/foto8.jpg" alt="Foto do casal 8">
                </div>
                <div class="polaroid-back">
                    <h4>Contagem Regressiva</h4>
                    <div id="timer-container" class="timer-polaroid"></div>
                    <p>Para o nosso 'Sim!'</p>
                </div>
            </div>
        </div>
    </div>
    <!-- O script vai aqui no final -->
    <script>
        document.addEventListener('DOMContentLoaded', () => {

            // --- ELEMENTOS ---
            const scrollableContent = document.querySelector('.scrollable');
            const backgroundOverlay = document.querySelector('.background-overlay');
            const polaroids = document.querySelectorAll('.polaroid');
            const polaroidPathArea = document.getElementById('polaroid-path-area');

            // --- LÓGICA DE SCROLL PARA MOSTRAR POLAROIDS ---
            function handleScroll() {
                const scrollableRect = scrollableContent.getBoundingClientRect();
                const pathRect = polaroidPathArea.getBoundingClientRect();
                const scrollPercent = (scrollableRect.height - pathRect.top) / scrollableRect.height;
                backgroundOverlay.style.opacity = Math.max(0, Math.min(0.7, scrollPercent));

                const thresholds = [0.05, 0.15, 0.25, 0.35, 0.45, 0.55, 0.65, 0.75];

                polaroids.forEach((polaroid, index) => {
                    if (scrollPercent >= thresholds[index] && !polaroid.classList.contains('is-flipped')) {
                        polaroid.classList.add('in-view');
                    } else if (scrollPercent < thresholds[index]) {
                        polaroid.classList.remove('in-view');
                    }
                });
            }

            // --- LÓGICA DE CLIQUE APRIMORADA PARA CENTRALIZAR E VIRAR ---
            polaroids.forEach(polaroid => {
                polaroid.addEventListener('click', function() {
                    // Se a polaroid clicada já estiver virada, desvira ela
                    if (this.classList.contains('is-flipped')) {
                        this.classList.remove('is-flipped');
                        this.style.transform = ''; // Remove o style inline para que o CSS assuma
                    } else {
                        // Desvira todas as outras que possam estar viradas
                        polaroids.forEach(p => {
                            if (p.classList.contains('is-flipped')) {
                                p.classList.remove('is-flipped');
                                p.style.transform = '';
                            }
                        });

                        // Adiciona a classe para o estado 'virado'
                        this.classList.add('is-flipped');

                        // --- A MÁGICA DO CÁLCULO PARA CENTRALIZAR ---
                        const windowCenterX = window.innerWidth / 2;
                        const windowCenterY = window.innerHeight / 2;

                        // Pega a posição original da polaroid na tela
                        const rect = this.getBoundingClientRect();
                        const polaroidCenterX = rect.left + rect.width / 2;
                        const polaroidCenterY = rect.top + rect.height / 2;

                        // Calcula a distância que a polaroid precisa se mover
                        const deltaX = windowCenterX - polaroidCenterX;
                        const deltaY = windowCenterY - polaroidCenterY;

                        // Aplica a transformação via style inline
                        // A ordem é importante: primeiro transladar, depois girar e escalar
                        this.style.transform = `
                            translateX(${deltaX}px) 
                            translateY(${deltaY}px) 
                            rotateY(180deg) 
                            scale(1.7) 
                            translateZ(150px)
                        `;
                    }
                });
            });


            // --- FUNÇÃO DO TIMER NO VERSO DA POLAROID ---
            function iniciaTimer() {
                const dataEvento = new Date('2025-10-11T10:25:00');
                const timerEl = document.getElementById('timer-container');
                if (!timerEl) return;
                
                function atualizaTimer() {
                    const agora = new Date();
                    const diff = dataEvento - agora;
                    if (diff <= 0) {
                        timerEl.textContent = "O dia chegou!";
                        clearInterval(timerInterval);
                        return;
                    }
                    const dias = Math.floor(diff / (1000 * 60 * 60 * 24));
                    const horas = Math.floor((diff / (1000 * 60 * 60)) % 24);
                    const minutos = Math.floor((diff / (1000 * 60)) % 60);
                    const segundos = Math.floor((diff / 1000) % 60);
                    timerEl.innerHTML = `<span class="timer-numero">${dias}</span> dias <span class="timer-numero">${horas}</span> horas e <span class="timer-numero">${minutos}</span> minutos`;
                }
                const timerInterval = setInterval(atualizaTimer, 1000);
                atualizaTimer();
            }

            // --- INICIALIZAÇÃO ---
            scrollableContent.addEventListener('scroll', handleScroll);
            window.addEventListener('resize', handleScroll);
            iniciaTimer();
            handleScroll();
        });
    </script>
</body>
</html>